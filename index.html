<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>MoneyZen CS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#0d6efd">

<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="style.css">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>

<header>
  <h1>MoneyZen <span>CS</span></h1>
  <div class="top-actions">
    <button id="installBtn" hidden>ðŸ“² Instalar App</button>
    <button id="toggleTheme">ðŸŒ™</button>
  </div>
</header>

<main id="app">

<section class="card">
  <h2>Adicionar Registro</h2>
  <input type="date" id="date">
  <input type="text" id="desc" placeholder="DescriÃ§Ã£o">
  <input type="number" id="value" placeholder="Valor">

  <select id="type">
    <option value="income">Renda</option>
    <option value="expense">Despesa</option>
  </select>

  <select id="category">
    <option>Geral</option>
    <option>AlimentaÃ§Ã£o</option>
    <option>Moradia</option>
    <option>Transporte</option>
    <option>Lazer</option>
    <option>Outros</option>
  </select>

  <button onclick="addEntry()">Salvar</button>
</section>

<section class="card resumo">
  <h2>Resumo Final</h2>
  <p>Renda Total: <span id="totalIncome">R$ 0</span></p>
  <p>Despesas Totais: <span id="totalExpense">R$ 0</span></p>
  <p class="saldo">Saldo Final: <span id="balance">R$ 0</span></p>
</section>

<section class="card">
  <h2>GrÃ¡fico Financeiro</h2>
  <canvas id="chart" height="180"></canvas>
</section>

<section class="card">
  <h2>HistÃ³rico</h2>
  <ul id="history"></ul>
</section>

<section class="actions">
  <button onclick="exportPDF()">ðŸ“„ PDF Profissional</button>
  <button onclick="exportCSV()">ðŸ“¥ CSV</button>
  <button onclick="clearAll()">ðŸ§¹ Limpar</button>
</section>

</main>

<footer>
  <p>MoneyZen CS Â© 2026 â€“ Uso exclusivo</p>
</footer>

<script src="script.js"></script>

<script>
/* Service Worker */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}

/* BotÃ£o Instalar App */
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", e => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.hidden = false;
});

installBtn.addEventListener("click", async () => {
  installBtn.hidden = true;
  await deferredPrompt.prompt();
  deferredPrompt = null;
});
</script>

</body>
</html>